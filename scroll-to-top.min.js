/*! ScrollToTop React 18 - autonome */
(function () {
	function load(src) {
		return new Promise(function (res, rej) {
			var s = document.createElement('script');
			s.src = src; s.async = true; s.crossOrigin = 'anonymous';
			s.onload = res; s.onerror = rej;
			document.head.appendChild(s);
		});
	}

	function injectCSS() {
		if (document.getElementById('scroll-to-top-style')) return;
    var css = '.scroll-to-top-btn{position:fixed;bottom:20px;right:20px;width:44px;height:44px;display:inline-flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:none;border-radius:50%;cursor:pointer;z-index:99;box-shadow:0 6px 16px rgba(102,126,234,.3);transition:transform .15s ease,box-shadow .15s ease,opacity .2s ease;-webkit-tap-highlight-color:transparent}.scroll-to-top-btn:hover{transform:translateY(-2px);box-shadow:0 10px 24px rgba(118,75,162,.35)}.scroll-to-top-btn:active{transform:translateY(0)}.scroll-to-top-btn:focus-visible{outline:2px solid #ffffffcc;outline-offset:2px}.scroll-to-top-icon{width:25px;height:25px;display:block}';		var style = document.createElement('style');
		style.id = 'scroll-to-top-style';
		style.textContent = css;
		document.head.appendChild(style);
	}

	function mount() {
		var ReactRef = window.React;
		var ReactDOMRef = window.ReactDOM;
		var useState = ReactRef.useState, useEffect = ReactRef.useEffect;

		function ScrollToTop() {
			var _a = useState(false), isVisible = _a[0], setIsVisible = _a[1];

			useEffect(function () {
				function onScroll() { setIsVisible(window.pageYOffset > 300); }
				window.addEventListener('scroll', onScroll, { passive: true });
				onScroll();
				return function () { window.removeEventListener('scroll', onScroll); };
			}, []);

			var prefersReducedMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
			function scrollToTop() { window.scrollTo({ top: 0, behavior: prefersReducedMotion ? 'auto' : 'smooth' }); }

      return isVisible
        ? ReactRef.createElement(
            'button',
            {
              className: 'scroll-to-top-btn',
              onClick: scrollToTop,
              'aria-label': 'Remonter en haut',
              title: 'Remonter en haut'
            },
            ReactRef.createElement(
              'svg',
              {
                className: 'scroll-to-top-icon',
                viewBox: '0 0 24 24',
                fill: 'none',
                role: 'img',
                'aria-hidden': 'true'
              },
              // Épaisseur augmentée: stroke-width="3"
              ReactRef.createElement('path', {
                d: 'M12 19V5',
                stroke: 'white',
                'stroke-width': '3',
                'stroke-linecap': 'round',
                'stroke-linejoin': 'round'
              }),
              ReactRef.createElement('path', {
                d: 'M5 12l7-7 7 7',
                stroke: 'white',
                'stroke-width': '3',
                'stroke-linecap': 'round',
                'stroke-linejoin': 'round'
              })
            )
          )
        : null;
		}

		var host = document.getElementById('scroll-to-top-root');
		if (!host) { host = document.createElement('div'); host.id = 'scroll-to-top-root'; document.body.appendChild(host); }
		var root = ReactDOMRef.createRoot(host);
		root.render(ReactRef.createElement(ScrollToTop));
	}

	async function init() {
		try {
			// Charge React 18 UMD si absent
			if (!window.React) await load('https://unpkg.com/react@18/umd/react.production.min.js');
			if (!window.ReactDOM) await load('https://unpkg.com/react-dom@18/umd/react-dom.production.min.js');
			injectCSS();
			mount();
		} catch (e) {
			console.error('ScrollToTop init error:', e);
		}
	}

	if (document.readyState === 'loading') {
		document.addEventListener('DOMContentLoaded', init);
	} else {
		init();
	}
})();